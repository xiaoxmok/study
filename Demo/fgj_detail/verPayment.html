<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>验证码支付</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./css/base.css">
	<link rel="stylesheet" type="text/css" href="./css/content.css">
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	<link rel="stylesheet" type="text/css" href="./css/mobiscroll.custom-3.0.0-beta6.min.css">
	<script type="text/javascript" src="./js/fontresize.js"></script>
</head>
<body class="bg">
    <header class="skin">
        <a href="javascript:history.back();" ><span class="back"></span>返回</a><a href="javascript:;" class="close_h">关闭</a><span>验证码支付</span>
    </header>
    <div class="info_top mt17">
        <p>忘记汇添富交易密码，可使用富管家交易密码完成买入。</p>
    </div>
    <div class="info_section">
        <div class="info_text">
            <span>交易密码</span>
            <input type="password" class="qr" placeholder="请输入富管家的交易密码" maxlength="18" minlength="6" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" />
            <i class="eye"></i>
        </div>
        <div class="info_text img_code">
            <span>图形验证码</span>
            <div class="veriCode">
                <input placeholder="输入验证码" class="veriCode" maxlength="6"  onkeyup="value=value.replace(/[^\w\.\/]/ig,'')"/>
                <img class="imgCode" src="./img/img_yz02.jpg" alt="">
            </div>
        </div>
        <div class="info_text phone_code">
            <span>手机验证码</span>
            <div class="veriCode">
                <input placeholder="输入验证码" class="veriCode" maxlength="6"  onkeyup="value=value.replace(/[^\w\.\/]/ig,'')"/>
                <a href="javascript:cl_verCode();" class="verCode">获取验证码</a>
                <a href="javascript:;" class="countDown">(<span class="timeOut">20</span>s)重新发送</a>
            </div>
        </div>
    </div>
    <div class="info_bottom">
        <!--<p class="pro"><input type="checkbox" name="info1" id="info1"/><label for="info1">同意<a href="protocol.html" class="link_color">《汇添富基金网上交易服务协议》</a>、<a
                href="protocol_1.html" class="link_color">《投资者权益须知》</a></label></p>-->
        <a href="javascript:;" class="submit skin">确定</a>
    </div>
    <div class="err_tan" style="width:170px;">
        <p>请输入图形验证码</p>
    </div>
    <script src="./js/jquery-2.2.2.min.js"></script>
    <script src="./js/mobiscroll.custom-3.0.0-beta6.min.js"></script>
    <script>

        /*查看-隐藏密码*/
        $('.eye').click(function(event) {
            $(this).toggleClass('eye_cur');
            if ($(this).hasClass('eye_cur')) {
                $(this).siblings('input').prop('type', 'text')
            } else {
                $(this).siblings('input').prop('type', 'password')
            }
        });

        /*图形验证码更换*/
        $('.imgCode').click(function(){
            if($('.imgCode').attr('src') == './img/img_yz02.jpg'){
                $('.imgCode').attr('src','./img/img_yz.jpg');
            }else{
                $('.imgCode').attr('src','./img/img_yz02.jpg');
            }

        });

        /*获取验证码倒记时*/
        var time=20;
        var time1;
        function cl_verCode(){
            //console.log($('.img_code input').val().length);
            if($('.img_code input').val().length !=0){
                $('.verCode').hide();
                $('.countDown').show();
                time1=setInterval(timeOut,1000);
                $('.err_tan').html('验证码已发送尾号6634手机上');
                shwo_tan();
                $('.err_tan').show();
                setTimeout(function(){
                    $('.err_tan').hide();
                },3000);
            }else{
                $('.err_tan').html('请输入图形验证码');
                shwo_tan();
                $('.err_tan').show();
                setTimeout(function(){
                    $('.err_tan').hide();
                },3000);
            }
        }

        function timeOut(){
            time--;
            $('.timeOut').html(time);
            //console.log(time);
            if(time < 0){
                clearInterval(time1);
                $('.verCode').show();
                $('.countDown').hide();
            }
        }

        /*点击确认的弹窗*/
        $(document).on("click",'.skin',function(){
            if($('.img_code input').val().length !=0){
                if($('.phone_code input').val().length !=0){
                    console.log('111')
                    window.location.href = 'paymentSuccess.html';
                }else{
                    $('.err_tan').html('请输入手机验证码');
                    shwo_tan();
                    $('.err_tan').show();
                    setTimeout(function(){
                        $('.err_tan').hide();
                    },3000);
                }
            }else{
                $('.err_tan').html('请输入图形验证码');
                shwo_tan();
                $('.err_tan').show();
                setTimeout(function(){
                    $('.err_tan').hide();
                },3000);
            }
        });

        function shwo_tan(){
            $(".err_tan").removeAttr("style");
            var w = $('.err_tan').width();
            var w_d = $(document).width();
            //var w_p = $('.err_tan p').outerWidth();

            //console.log(w);
            //console.log(w_d);
            var w_t=w_d-150;


            if(w >= w_t){
                $('.err_tan').css({"width":w_t + "px"});
                $('.err_tan').css({"left":(w_d - $('.err_tan').outerWidth())/2+"px"});
            }else{
                $('.err_tan').css({"left":(w_d - $('.err_tan').outerWidth())/2+"px"});
                //$('.err_tan').css({"margin-left":-(w_rem/2)+"rem"});
            }
        }

        $(function(){
            shwo_tan();
        })

    </script>

</body>
</html>