<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>转入</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./css/base.css">
	<link rel="stylesheet" type="text/css" href="./css/content.css">
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	<script type="text/javascript" src="./js/fontresize.js"></script>
</head>
<body class="bg">
    <header class="skin">
        <a href="javascript:history.back();" ><span class="back"></span>返回</a><a href="javascript:;" class="close_h">关闭</a><span>转入</span>
    </header>
    <div class="turn_top mt17">
        <div class="img bank_007"></div>
        <div class="info">
            <p class="p1">招商银行</p>
            <p class="p2">尾号2462</p>
        </div>
    </div>
    <p class="turn_p">默认充值限额：单笔、日累计1000万</p>
    <div class="turn_section">
        <div class="turn_text money">
            <span>充值金额（元）</span>
            <input placeholder="请输入充值金额" type="number" ></input>
        </div>
    </div>
    <p class="turn_p">您的充值于2015-01-28开始计算，2015-01-28到账</p>
    <div class="turn_btn">
        <a href="javascript:;"  class="submit">确认</a>
    </div>

    <div class="zhezhao"></div>
    <div class="turn_tan">
        <div class="close"></div>
        <div class="tan_top">
            <p>请输入密码</p>
        </div>
        <p class="tan_p">使用<strong class="textColor">尾号6664</strong>工商银行卡，充值<strong class="textColor">1,234.00</strong>元</p>
        <input type="number" pattern="[0-9]*" oninput="if(value.length>6)value=value.slice(0,5)" class="input_password" autofocus>
        <div class="tan_con">
            <table>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </table>
        </div>
        <a href="javascript:;" class="forgetP">忘记密码？</a>
    </div>
    <div class="info_tan">
        <div class="info_tan_top tc pb20">
            <p>交易密码错误，还能尝试3次</p>
        </div>
        <div class="know_btn">
            <a href="javascript:;" class="forget repeat">重新输入</a>
            <a href="verPayment.html" class="know">验证码支付</a>
        </div>
    </div>
    <div class="info_tan">
        <div class="info_tan_top tc pb20">
            <p>交易密码错误次数今日已超限，可重置交易密码或拨打客服热线400-888-9918</p>
        </div>
        <div class="know_btn">
            <a href="javascript:;" class="forget know">我知道了</a>
            <a href="verPayment.html" class="know">验证码支付</a>
        </div>
    </div>
    <div class="loading_tan">
        <div class="img"></div>
        <p>加载中...</p>
    </div>

    <script src="./js/zepto.min.js"></script>
    <script>
        /*  取现-按钮的切换事件 */
        $(".check label").on("click",function(){
            var labelclass = $(this).attr("class");
            var radio = $(this).siblings("input");
            if(labelclass == "icon-off"){
                radio.attr("checked",false);
                $(".check label").attr("class","icon-off");
                $(this).attr("class","icon-on");
            }else{
                radio.attr("checked",true);
                //$(".check label").attr("class","icon-off");
                $(this).attr("class","icon-on");
            }
        });

        /*点击确认的弹窗*/
        $(document).on("click",'.skin',function(){
            $('.zhezhao,.turn_tan').show();
            $('.input_password').focus();
            $('.input_password').val('');
            $(".tan_con td").html('')
            $('.tan_con td').click(function(){
                $('.input_password').focus();
            })
            $('.close').click(function(){
                $('.zhezhao,.turn_tan').hide();
            })

        });

        $(function(){
            $('.know').click(function(){
                $('.zhezhao,.info_tan').hide();
            })
            $('.repeat').click(function(){
                $('.info_tan').hide().eq(1).show();
            })
        });

        /*输入完1位数字后自动跳到第二个input，如此类推到第6个完成*/
        /*$(function(){
            var txts = $(".tan_con input");
            for(var i = 0; i<txts.length;i++){
                var t = txts[i];
                t.index = i;
                t.setAttribute("readonly", true);
                t.onkeyup=function(){
                    this.value=this.value.replace(/[^1-9]/g,'');
                    var next = this.index + 1;
                    if(next > txts.length - 1){
                        $('.turn_tan').hide();
                        $('.zhezhao').show();
                        $('.info_tan').eq(0).show();
                    }else{
                        if(this.value == ''){
                            return;
                        }else{
                            txts[next].removeAttribute("readonly");
                            txts[next].focus();
                        }
                    }
                }
            }
            txts[0].removeAttribute("readonly");
        })*/

        /*输入密码*/
        $(function(){
            var pwd = $('.input_password');
            pwd.keyup(function(){
                var val = this.value.split('');
                //console.log(val);
                //console.log(val.length);
                switch (val.length){
                    case 0:
                        $(".tan_con td").html('');
                        break;
                    case 1:
                        $(".tan_con td").html('').eq(0).html("*");
                        break;
                    case 2:
                        $(".tan_con td").html('').eq(0).html("*");
                        $(".tan_con td").eq(1).html("*");
                        break;
                    case 3:
                        $(".tan_con td").html('').eq(0).html("*");
                        $(".tan_con td").eq(1).html("*");
                        $(".tan_con td").eq(2).html("*");
                        break;
                    case 4:
                        $(".tan_con td").html('').eq(0).html("*");
                        $(".tan_con td").eq(1).html("*");
                        $(".tan_con td").eq(2).html("*");
                        $(".tan_con td").eq(3).html("*");
                        break;
                    case 5:
                        $(".tan_con td").html('').eq(0).html("*");
                        $(".tan_con td").eq(1).html("*");
                        $(".tan_con td").eq(2).html("*");
                        $(".tan_con td").eq(3).html("*");
                        $(".tan_con td").eq(4).html("*");
                        break;
                    case 6:
                        $(".tan_con td").html('').eq(0).html("*");
                        $(".tan_con td").eq(1).html("*");
                        $(".tan_con td").eq(2).html("*");
                        $(".tan_con td").eq(3).html("*");
                        $(".tan_con td").eq(4).html("*");
                        $(".tan_con td").eq(5).html("*");

                        /*输入六个密码后验证*/
                        //$('.turn_tan').css({"z-index":"99"});
                        //$('.zhezhao').show();
                        $('.loading_tan').show();
                        //$('.info_tan').eq(0).show();
                        $('.input_password').blur();
                        setTimeout(function(){
                            //$('.turn_tan').css({"z-index":"99"});
                            $('.loading_tan,.turn_tan').hide();
                            $('.info_tan').eq(0).show();
                        },5000);
                        break;
                }
            });
        });

        /*金额的判断*/
        $(function(){
            var input = $('.money input');
            input.keyup(function(){
                //console.log('222');
                //this.value=this.value.replace(/[^1-9]/g,'');
                if(this.value.length >0){
                    $('.submit').addClass('skin');
                }else{
                    $('.submit').removeClass('skin');
                }
            });
        });

        function num(obj){
            obj.value = obj.value.replace(/[^\d.]/g,""); //清除"数字"和"."以外的字符
            obj.value = obj.value.replace(/^\./g,""); //验证第一个字符是数字
            obj.value = obj.value.replace(/\.{2,}/g,"."); //只保留第一个, 清除多余的
            obj.value = obj.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");
            obj.value = obj.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,'$1$2.$3'); //只能输入两个小数
        }

    </script>
</body>
</html>