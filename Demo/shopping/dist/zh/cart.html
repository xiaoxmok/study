<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="keywords" content="" />
    <meta name="description" content=""/>
    <link rel="stylesheet" href="./../public/css/reset.css">
    <link rel="stylesheet" href="./../public/css/include.css">
    <link rel="stylesheet" href="./../public/css/common.css">
    <script src="./../public/js/lib/jquery-3.1.0.js"></script>
    <script src="../public/js/common.js"></script>
    <script src="../public/js/api.js"></script>
    <link rel="stylesheet" href="../public/css/cart.css">
</head>
<body class="on5">
<!--header页面-->
<div class="header">
    <div class="content">
        <div class="logo">
            <img src="./../public/img/web_logo.png" alt="logo">
        </div>
        <div class="nav">
            <ul>
                <li><a href="./aboutUs.html" class="on1">关于我们</a></li>
                <li><a href="./solution.html" class="on2">解决方案</a></li>
                <li><a href="./eduSoftware.html" class="on3">教育软件推荐</a></li>
                <li><a href="./information.html" class="on4">资讯中心</a></li>
                <li><a href="./index.html" class="on5">BYOD平台</a></li>
            </ul>
        </div>
        <div class="other">
            <div class="service">
                <a href="#">维修</a>
                <ul>
                    <li><a href="./center.html">维修记录</a></li>
                    <li><a href="javascript:;">维修申请</a></li>
                </ul>
            </div>
            <div class="lan">
                <a href="./../en/index.html">EN</a>
            </div>
        </div>
    </div>
</div>

<div class="media-header">
    <div class="icon">
        <img src="./../public/img/fenlei.png" alt="">
    </div>
    <div class="address">
        <a class="madd" href="javascript:;">深圳</a><span></span>
        <ul>
            <li data-name="1">深圳</li>
            <li data-name="0">上海</li>
        </ul>
    </div>
    <div class="logo">
        <img src="./../public/img/web_logo.png" alt="logo">
    </div>
    <div class="cart"><a href="./cart.html"></a></div>
    <div class="user"><a href="./center.html"></a></div>


    <div class="nav">
        <ul>
            <li class="selc"><a href="./aboutUs.html">关于我们</a></li>
            <li class="selc"><a href="./solution.html">解决方案</a></li>
            <li class="selc"><a href="./eduSoftware.html">教育软件推荐</a></li>
            <li class="selc"><a href="./information.html">资讯中心</a></li>
            <li class="selc"><a href="./index.html">BYOD平台</a></li>
            <li class="service"><a href="javascript:;">维修</a>
                <ul>
                    <li class="selc"><a href="./center.html">维修记录</a></li>
                    <li class="selc"><a href="./solution.html">维修申请</a></li>
                </ul>
            </li>
            <li class="selc"><a href="javascript:;">当前语言：中文</a></li>
            <li class="selc"><a href="./login.html">登录</a></li>
            <li class="selc"><a href="./prefectData.html">完善资料</a></li>
        </ul>
    </div>
</div>
<!--头部登录信息-->
<div class="header-bar">
    <div class="content">
        <span class="welcome">Dear XXX,欢迎访问协同学校专属页面。</span>
        <div class="login logined" style="display: none;"><a href="./center.html">个人中心</a></div>
        <div class="login loging"><a href="./login.html">登录/注册</a></div>
        <div class="cart"><a href="./cart.html"><span></span>购物车</a></div>
        <div class="address">
            <span></span>
            <a class="add" href="javascript:;">深圳</a>
            <ul>
                <li data-name="1">深圳</li>
                <li data-name="0">上海</li>
            </ul>
        </div>
        <!--<div class="login"><a href="javascript:;" data-name="personalCenter">个人中心</a></div>-->

    </div>
</div>
<div class="main">
    <div class="process">
        <a href="./index.html">BYOD平台</a> >
        <a href="javascript:;">购物车</a>
    </div>
    <div class="cartDetail">
        <table>
            <tr>
                <th><input type="checkbox" name="selectAll">全选</th>
                <th>商品</th>
                <th class="td3">数量</th>
                <th>小计</th>
                <th>操作</th>
            </tr>
            <tr>
                <td><input type="checkbox" name="select"></td>
                <td>
                    <div class="img"><img src="../public/img/order.png" alt=""></div>
                    <div class="con">
                        <p class="title">21.5寸iMac-Retina 4k Display</p>
                        <span class="price">￥<em>5288.00</em></span>
                        <input type="text" value="1" class="amountM">
                    </div>
                </td>
                <td class="td3">
                    <input type="text" value="1" class="amount">
                </td>
                <td>￥5288.00</td>
                <td class="operate">
                    <a href="javascript:;">删除</a>
                </td>
            </tr>
            <tr>
                <td><input type="checkbox" name="select"></td>
                <td>
                    <div class="img"><img src="../public/img/order.png" alt=""></div>
                    <div class="con">
                        <p class="title">21.5寸iMac-Retina 4k Display</p>
                        <span class="price">￥<em>5200.00</em></span>
                        <input type="text" value="1" class="amountM">
                    </div>
                </td>
                <td class="td3">
                    <input type="text" value="1" class="amount">
                </td>
                <td>￥5288.00</td>
                <td class="operate">
                    <a href="javascript:;">删除</a>
                </td>
            </tr>
        </table>
        <div class="Clearing">
            <a href="./submitOrder.html">去结算</a>
            <span class="all">总价：<em>￥0.00</em></span>
            <span class="amount">已选择<em>0</em>件商品</span>
        </div>

    </div>
    <div class="recommend">
        <div class="box">
            <p>推荐配件</p>
        </div>
        <div class="content">
            <ul>
                <li>
                    <img src="../public/img/goods2.jpg" alt="">
                    <div class="con">
                        <p class="Title">Apple care</p>
                        <p class="description">hello, 未来. 现 RMB 8,388 起售. 立刻购买可享免息分期. 免费送货与退货.</p>
                        <p class="price"><span>常规价格：</span>
                            <del>￥999.00</del>
                        </p>
                        <p class="price"><span>学校优惠价：</span><em>￥999.00</em></p>
                        <a class="apply" href="javascript:;">加入购物车</a>
                    </div>
                </li>
                <li>
                    <img src="../public/img/goods2.jpg" alt="">
                    <div class="con">
                        <p class="Title">Apple care</p>
                        <p class="description">hello, 未来. 现 RMB 8,388 起售. 立刻购买可享免息分期. 免费送货与退货.</p>
                        <p class="price"><span>常规价格：</span>
                            <del>￥999.00</del>
                        </p>
                        <p class="price"><span>学校优惠价：</span><em>￥999.00</em></p>
                        <a class="apply" href="javascript:;">加入购物车</a>
                    </div>
                </li>
                <li>
                    <img src="../public/img/goods2.jpg" alt="">
                    <div class="con">
                        <p class="Title">Apple care</p>
                        <p class="description">hello, 未来. 现 RMB 8,388 起售. 立刻购买可享免息分期. 免费送货与退货.</p>
                        <p class="price"><span>常规价格：</span>
                            <del>￥999.00</del>
                        </p>
                        <p class="price"><span>学校优惠价：</span><em>￥999.00</em></p>
                        <a class="apply" href="javascript:;">加入购物车</a>
                    </div>
                </li>
                <li>
                    <img src="../public/img/goods2.jpg" alt="">
                    <div class="con">
                        <p class="Title">Apple care</p>
                        <p class="description">hello, 未来. 现 RMB 8,388 起售. 立刻购买可享免息分期. 免费送货与退货.</p>
                        <p class="price"><span>常规价格：</span>
                            <del>￥999.00</del>
                        </p>
                        <p class="price"><span>学校优惠价：</span><em>￥999.00</em></p>
                        <a class="apply" href="javascript:;">加入购物车</a>
                    </div>
                </li>
                <li>
                    <img src="../public/img/goods2.jpg" alt="">
                    <div class="con">
                        <p class="Title">Apple care</p>
                        <p class="description">hello, 未来. 现 RMB 8,388 起售. 立刻购买可享免息分期. 免费送货与退货.</p>
                        <p class="price"><span>常规价格：</span>
                            <del>￥999.00</del>
                        </p>
                        <p class="price"><span>学校优惠价：</span><em>￥999.00</em></p>
                        <a class="apply" href="javascript:;">加入购物车</a>
                    </div>
                </li>

            </ul>
        </div>
    </div>
</div>

<!--尾部-->
<div class="footer">
    <div class="content">
        <p>ICP备案：XXXXXX</p>
    </div>
</div>
<script>
    $(function () {
        $('.cartDetail input[name="selectAll"]').click(function () {
            //alert(this.checked);
            if ($(this).is(':checked')) {
                console.log('111');
                $('input[name="select"]').each(function () {
                    //此处如果用attr，会出现第三次失效的情况
                    $(this).prop("checked", true);
                });
            } else {
                $('input[name="select"]').each(function () {
                    $(this).prop("checked", false);
                });
                //$(this).removeAttr("checked");
            }

        });

        /*//没被选中的
        var checkedList = new Array();
        $("input[name='id']:not(:checked)").each(function() {
            checkedList.push($(this).val());
        });*/

        //已选中的

        $('input[type="checkbox"]').click(function () {
            var checkedList = [];
            var allAmount = 0;
            $("input[name='select']:checked").each(function () {
                var list = {
                    title: $(this).parent().parent().find('.title').html(),
                    price: parseFloat($(this).parent().parent().find('.price em').html()),
                    amount: $(this).parent().parent().find('.amount').val() || $(this).parent().parent().find('.amountM').val()
                }
                //console.log($(this).parent().parent().html());
                checkedList.push(list);
                allAmount += list.price;
                $('.Clearing .all em').html(allAmount.toFixed(2));
            });
            console.log(checkedList);
            $('.Clearing .amount em').html(checkedList.length);
            if (checkedList.length === 0) {
                $('.Clearing .all em').html("0.00");
                $('.cartDetail input[name="selectAll"]').prop("checked", false);
            }
        });
    })
</script>
</body>
</html>