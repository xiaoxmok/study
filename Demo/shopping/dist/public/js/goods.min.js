$(function(){login()||(location.href="login.html");getCookie("token");var a=GetRequest(),t=api.getGoods(a.id,i18nLanguage);$("#name").html(t.name),$("#summary").html(t.summary);var i=api.getSkuList(t.id,i18nLanguage),n=i.data,o=i.extra.param;function c(a){var t=n[a].img_infos;$(".swiper-wrapper").html(""),$(".product .small").html(""),t.forEach(function(a,t){var i='<div class="swiper-slide"><img src="'+a.url+'" alt=""></div>';$(".swiper-wrapper").append(i);var e='<a href="javascript:;"><img src="'+a.url+'" alt=""></a>';$(".product .small").append(e)}),$("#price").html(n[a].price),$("#school_price").html(n[a].school_price);new Swiper(".swiper-container",{"speed":1e3,"autoplay":{"delay":3e3},"loop":!0,"pagination":{"el":".swiper-pagination"}})}c(0);var r=n[0].id,l=[{"sku_id":r,"quantity":$("#quantity").val()}];for(var e in o)if(void 0!==o[e].value){var s;o[e].value.forEach(function(a,t){0===t?s='<a href="javascript:;" data-name="'+e+'" class="active">'+a+"</a>":s+='<a href="javascript:;" data-name="'+e+'">'+a+"</a>"});var u='<tr>\n                        <td class="td1">'+o[e].name+'：</td>\n                        <td class="td2 '+e+'">\n'+s+"                        </td>\n                    </tr>";$(".param").append(u)}$(".param .td2").on("click","a",function(){$(this).parent().find("a").removeClass("active"),$(this).addClass("active");var i={},e=0;for(var e in o)void 0!==o[e].value&&(i[e]=$("."+e).find(".active").html());n.forEach(function(a,t){isEqual(a.param_value,i)&&(r=a.id,e=t)}),c(e),l=[{"sku_id":r,"quantity":$("#quantity").val()}]}),$(".add").click(function(){var a=$("#quantity").val(),t=api.getCartList(getCookie("userId"),i18nLanguage),i=!0;(t.forEach(function(a,t){a.sku_id===r&&(i=!1)}),i)?(console.log("quantity",a),200===api.getCartCreate(getCookie("userId"),r,a).code&&($(".zhezhao").show(),$(".tan2 .con p").html("加入购物车成功"),$(".tan2").show(),setTimeout(function(){$(".zhezhao").hide(),$(".tan2").hide()},1e3))):($(".zhezhao").show(),$(".tan2 .con p").html("该商品已经加入购物，请去购物车下单"),$(".tan2").show(),setTimeout(function(){$(".zhezhao").hide(),$(".tan2").hide()},1e3))}),$(".buy").click(function(){location.href="submitOrder.html?order_items="+JSON.stringify(l)}),$(".collect").click(function(){}),$(".contact ").click(function(){$(".zhezhao").show(),$(".tan1").show()}),$(".cls ").click(function(){$(".zhezhao").hide(),$(".tan1").hide()});var d=$(".btnNum .text").val();$(".btnNum .less").click(function(){1<d&&(d--,$(".btnNum .text").attr("value",d)),l=[{"sku_id":r,"quantity":$("#quantity").val()}]}),$(".btnNum .plus").click(function(){d++,$(".btnNum .text").attr("value",d),l=[{"sku_id":r,"quantity":$("#quantity").val()}]}),$(".productNav li").click(function(){var a=$(this).index();$(".productDetail").hide().eq(a).show(),$(".productNav li").removeClass("active"),$(this).addClass("active")})});