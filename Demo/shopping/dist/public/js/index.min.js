$(function(){function i(a){$(".goods .content ul").html("");var e=a.data,i=a.extra;e.forEach(function(a,e){var i;i=login()?'<p class="price"><span>学校优惠价：</span><em>￥'+a.school_price+"</em></p>":'<p class="price"><span>教育优惠价：</span><em>￥'+a.education_price+"</em></p>";var t='<li>\n                    <a href="./product.html?id='+a.id+'">\n                        <img src="'+a.img_infos[0].url+'" alt="">\n                        <div class="con">\n                            <p class="Title">'+a.name+'</p>\n                            <p class="description">'+a.summary+'</p>\n                            <p class="price"><span>常规价格：</span><del>￥'+a.price+"</del></p>\n"+i+"                        </div>\n                    </a>\n                </li>";$(".goods .content ul").append(t)}),$(".goods .page #page").val(i.page+"/"+i.total)}$.ajax({"type":"GET","url":url+"/api/v1/banner/index","dataType":"json","success":function(a){if(200==a.code){var e=a.data;$(".swiper-wrapper").html(""),e.forEach(function(a,e){var i='<div class="swiper-slide">\n                <a href="'+a.link+'"><img src="'+a.img_info.url+'" alt=""></a>\n            </div>';$(".swiper-wrapper").append(i)});new Swiper(".swiper-container",{"speed":1e3,"autoplay":{"delay":3e3},"loop":!0,"pagination":{"el":".swiper-pagination"}})}},"error":function(a,e,i){console.log(a,e,i)}}),i(api.getGoodsList(0,1,20,"%2Bsale",i18nLanguage)),$(".nav .left li").click(function(){$(".nav .left li").removeClass("active"),$(this).addClass("active");var a=$(this).attr("data-name");i(api.getGoodsList(a,1,20,"%2Bsale",i18nLanguage))}),$(".nav .right .sales").click(function(){var a,e=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-sale",$(this).removeClass("active")):(a="%2Bsale",$(".nav .right li").removeClass("active"),$(this).addClass("active")),i(api.getGoodsList(e,1,20,a,i18nLanguage))}),$(".nav .right .price").click(function(){var a,e=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-price",$(this).removeClass("active")):(a="%2Bprice",$(".nav .right li").removeClass("active"),$(this).addClass("active")),i(api.getGoodsList(e,1,20,a,i18nLanguage))}),$(".nav .right .addedTime").click(function(){var a,e=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-created_at",$(this).removeClass("active")):(a="%2Bcreated_at",$(".nav .right li").removeClass("active"),$(this).addClass("active")),i(api.getGoodsList(e,1,20,a,i18nLanguage))}),$(".goods .page #first").click(function(){var a=$(".nav .left .active").attr("data-name");i(api.getGoodsList(a,1,20,"%2Bprice",i18nLanguage))}),$(".goods .page #last").click(function(){var a=$(".nav .left .active").attr("data-name"),e=$(".goods .page #page").val().split("/");i(api.getGoodsList(a,e[1],20,"%2Bprice",i18nLanguage))}),$(".goods .page #left").click(function(){var a=$(".nav .left .active").attr("data-name"),e=$(".goods .page #page").val().split("/");"1"===e[0]?i(api.getGoodsList(a,1,20,"%2Bprice",i18nLanguage)):i(api.getGoodsList(a,e[0]-1,20,"%2Bprice",i18nLanguage))}),$(".goods .page #right").click(function(){var a=$(".nav .left .active").attr("data-name"),e=$(".goods .page #page").val().split("/");e[0]+1>e[1]?i(api.getGoodsList(a,e[1],20,"%2Bprice",i18nLanguage)):i(api.getGoodsList(a,e[0]+1,20,"%2Bprice",i18nLanguage))})});