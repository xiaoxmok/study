$(function(){$.ajax({"type":"GET","url":url+"/api/v1/banner/index","dataType":"json","success":function(a){if(200==a.code){var i=a.data;$(".swiper-wrapper").html(""),i.forEach(function(a,i){var e='<div class="swiper-slide">\n                <a href="'+a.link+'"><img src="'+a.img_info.url+'" alt=""></a>\n            </div>';$(".swiper-wrapper").append(e)});new Swiper(".swiper-container",{"speed":1e3,"autoplay":{"delay":3e3},"loop":!0,"pagination":{"el":".swiper-pagination"}})}},"error":function(a,i,e){console.log(a,i,e)}});function e(a){$(".goods .content ul").html("");var i=a.data,e=a.extra;i.forEach(function(a,i){var e;e=login()?'<p class="price"><span>学校优惠价：</span><em>￥'+a.school_price+"</em></p>":'<p class="price"><span>教育优惠价：</span><em>￥'+a.education_price+"</em></p>";var t='<li>\n                    <a href="./product.html?id='+a.id+'">\n                        <img src="'+a.img_infos[0].url+'" alt="">\n                        <div class="con">\n                            <p class="Title">'+a.name+'</p>\n                            <p class="description">'+a.summary+'</p>\n                            <p class="price"><span>常规价格：</span><del>￥'+a.price+"</del></p>\n"+e+"                        </div>\n                    </a>\n                </li>";$(".goods .content ul").append(t)}),$(".goods .page #page").val(e.page+"/"+e.last_page)}$(".goods .content ul").html("<li>Loading...</li>"),api.getGoodsList(0,1,20,"%2Bsale",i18nLanguage,e),$(".nav .left li").click(function(){$(".nav .left li").removeClass("active"),$(this).addClass("active");var a=$(this).attr("data-name");$(".goods .content ul").html("<li>Loading...</li>"),api.getGoodsList(a,1,20,"%2Bsale",i18nLanguage,e)}),$(".nav .right .sales").click(function(){var a,i=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-sale",$(this).removeClass("active")):(a="%2Bsale",$(".nav .right li").removeClass("active"),$(this).addClass("active")),api.getGoodsList(i,1,20,a,i18nLanguage,e)}),$(".nav .right .price").click(function(){var a,i=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-price",$(this).removeClass("active")):(a="%2Bprice",$(".nav .right li").removeClass("active"),$(this).addClass("active")),api.getGoodsList(i,1,20,a,i18nLanguage,e)}),$(".nav .right .addedTime").click(function(){var a,i=$(".nav .left .active").attr("data-name");$(this).hasClass("active")?(a="-created_at",$(this).removeClass("active")):(a="%2Bcreated_at",$(".nav .right li").removeClass("active"),$(this).addClass("active")),api.getGoodsList(i,1,20,a,i18nLanguage,e)}),$(".goods .page #first").click(function(){var a=$(".nav .left .active").attr("data-name");api.getGoodsList(a,1,20,"%2Bprice",i18nLanguage,e)}),$(".goods .page #last").click(function(){var a=$(".nav .left .active").attr("data-name"),i=$(".goods .page #page").val().split("/");api.getGoodsList(a,i[1],20,"%2Bprice",i18nLanguage,e)}),$(".goods .page #left").click(function(){var a=$(".nav .left .active").attr("data-name"),i=$(".goods .page #page").val().split("/");"1"===i[0]?api.getGoodsList(a,1,20,"%2Bprice",i18nLanguage,e):api.getGoodsList(a,i[0]-1,20,"%2Bprice",i18nLanguage,e)}),$(".goods .page #right").click(function(){var a=$(".nav .left .active").attr("data-name"),i=$(".goods .page #page").val().split("/");i[0]+1>i[1]?api.getGoodsList(a,i[1],20,"%2Bprice",i18nLanguage,e):api.getGoodsList(a,i[0]+1,20,"%2Bprice",i18nLanguage,e)})});