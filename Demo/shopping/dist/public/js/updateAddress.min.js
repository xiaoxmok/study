$(function(){login()||(location.href="login.html");var l=getCookie("token"),n=GetRequest(),e=api.getAddressId(n.id);$("#name").val(e.reciever_name),$("#address").val(e.address),$("#phone").val(e.reciever_phone),$("#country_code").val(e.country_code),"y"===e.is_default?$("#defalut").prop("checked",!0):$("#defalut").prop("checked",!1),$(".submit").click(function(){var e,r,a,o,t=1;if((e=$("#name").val()).length<=0)$(".error").html("收件人不为能空");else if((a=$("#address").val()).length<=0)$(".error").html("地址不为能空");else if(r=$("#phone").val(),CheckMobile(r))if(o=$("#country_code").val(),CheckNum(o)){t=$("#defalut").is(":checked")?"y":"n";var d={"token":l,"id":n.id,"reciever_name":e,"country_code":o,"reciever_phone":r,"address":a,"is_default":t};$.ajax({"type":"POST","url":url+"/api/v1/address/update","dataType":"json","data":d,"success":function(e){200===e.code&&($(".error").html("提交成功"),setTimeout(function(){location.href="addressManagement.html"},1e3))},"error":function(e,r,a){}})}else $(".error").html("区号格式不正确");else $(".error").html("手机号格式不正确")})});