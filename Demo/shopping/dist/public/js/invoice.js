$(function(){login()||(location.href="login.html"),$('.invoiceType input[name="type1"]').click(function(){var e=$(this).val();console.log(e),"personal"===e?$(".tax_no").hide():"company"===e&&$(".tax_no").show()});var n,i,o,a,t,_=getCookie("token"),c=GetRequest();isEnglish()?(n={"normal":"normal","vat":"vat"},i={"personal":"personal","company":"company"},o={"detail":"detail","category":"category"},a={"company":"company"},t={"detail":"detail"}):(n={"normal":"普通发票","vat":"增值税发票"},i={"personal":"个人","company":"企业"},o={"detail":"商品明细","category":"商品类别"},a={"company":"企业"},t={"detail":"商品明细"}),api.getOrderInfo(c.order_no,function(e){null!==e.invoice_info?("normal"===e.invoice_info.billing_type?"personal"===e.invoice_info.normal_invoice_type?null!==e.invoice_info.normal_title?($(".invoice-info").show(),$(".invoice-normal").show()):$(".invoice-submit").show():"company"===e.invoice_info.normal_invoice_type&&(null!==e.invoice_info.normal_title&&null!==e.invoice_info.normal_tax_no?($(".invoice-info").show(),$(".invoice-normal").show()):$(".invoice-submit").show()):"vat"===e.invoice_info.billing_type&&(null!==e.invoice_info.vat_company&&null!==e.invoice_info.vat_tax_no?($(".invoice-info").show(),$(".invoice-normal").show()):$(".invoice-submit").show()),console.log(e),$(".order_no em").html(e.invoice_info.order_no),$(".billing_type em").html(n[e.invoice_info.billing_type]),$(".normal_invoice_type em").html(i[e.invoice_info.normal_invoice_type]),$(".normal_title em").html(e.invoice_info.normal_title),$(".normal_tax_no em").html(e.invoice_info.normal_tax_no),$(".normal_content em").html(o[e.invoice_info.normal_content]),$(".vat_invoice_type em").html(a[e.invoice_info.vat_invoice_type]),$(".vat_tax_no em").html(e.invoice_info.vat_tax_no),$(".vat_content em").html(t[e.invoice_info.vat_content]),$(".vat_company em").html(e.invoice_info.vat_company),$(".vat_address em").html(e.invoice_info.vat_address),$(".vat_phone em").html(e.invoice_info.vat_phone),$(".vat_bank em").html(e.invoice_info.vat_bank),$(".vat_bank_no em").html(e.invoice_info.vat_bank_no),$(".receiver_name em").html(e.invoice_info.receiver_name),$(".receiver_phone em").html(e.invoice_info.receiver_phone),$(".receiver_province em").html(e.invoice_info.receiver_province+" "+e.invoice_info.receiver_city+" "+e.invoice_info.receiver_area),$(".receiver_city em").html(e.invoice_info.receiver_city),$(".receiver_area em").html(e.invoice_info.receiver_area),$(".receiver_address em").html(e.invoice_info.receiver_address)):$(".invoice-submit").show()}),$(".submit").click(function(){var e;e="normal"===$('.invoiceInfo input[name="info"]:checked').val()?{"token":_,"order_no":c.order_no,"billing_type":"normal","normal_invoice_type":$('.invoiceType input[name="type1"]:checked').val(),"normal_title":$("#normal_title").val(),"normal_tax_no":$("#normal_tax_no").val(),"normal_content":$('.invoiceType input[name="content1"]:checked').val()}:{"token":_,"order_no":c.order_no,"billing_type":"vat","vat_invoice_type":"company","vat_tax_no":$("#vat_tax_no").val(),"vat_content":"detail","vat_company":$("#vat_company").val(),"vat_address":$("#vat_address").val(),"vat_phone":$("#vat_phone").val(),"vat_bank":$("#vat_bank").val(),"vat_bank_no":$("#vat_bank_no").val(),"receiver_name":$("#receiver_name").val(),"receiver_phone":$("#receiver_phone").val(),"receiver_province":$("#receiver_province option:selected").val(),"receiver_city":$("#receiver_city option:selected").val(),"receiver_area":$("#receiver_area option:selected").val(),"receiver_address":$("#receiver_address").val()},$.ajax({"type":"POST","url":url+"/api/v1/order/update","dataType":"json","data":e,"success":function(e){200===e.code&&(isEnglish()?$(".error").html("Submitted successfully"):$(".error").html("提交成功"),setTimeout(function(){location.href="center.html"},2e3))},"error":function(){}})})});