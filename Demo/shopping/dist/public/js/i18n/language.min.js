var getCookie=function(e,n,a){if(void 0===n){var o=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),i=0;i<t.length;i++){if((s=jQuery.trim(t[i])).substring(0,e.length+1)==e+"="){o=decodeURIComponent(s.substring(e.length+1));break}}return o}a=a||{},null===n&&(n="",a.expires=-1);var g,r="";a.expires&&("number"==typeof a.expires||a.expires.toUTCString)&&("number"==typeof a.expires?(g=new Date).setTime(g.getTime()+24*a.expires*60*60*1e3):g=a.expires,r="; expires="+g.toUTCString());var u=a.path?"; path="+a.path:"",l=a.domain?"; domain="+a.domain:"",c=([s,r,u,l,c].join(""),a.secure?"; secure":""),s=[[e,"=",encodeURIComponent(n)].join(""),r,u,l,c].join("");document.cookie=s},getNavLanguage=function(){return"Netscape"==navigator.appName&&navigator.language},i18nLanguage="zh-CN",webLanguage=["zh-CN","zh-TW","en"],execI18n=function(){var e=$("#i18n_pagename");if(e.length<1)return console.log('未找到页面名称元素，请在页面写入\n <meta id="i18n_pagename" content="页面名(对应语言包的语言文件名)">'),!1;var n=e.attr("content");if(n=n.split("-"),getCookie("userLanguage"))i18nLanguage=getCookie("userLanguage"),console.log("i18nLanguage:",i18nLanguage);else{var a=getNavLanguage();if(!a)return console.log("not navigator"),!1;-1<$.inArray(a,webLanguage)&&getCookie("userLanguage",i18nLanguage=a,{"expires":30,"path":"/"})}if(null==$.i18n)return console.log("请引入i18n js 文件"),!1;jQuery.i18n.properties({"name":n,"path":"public/i18n/"+i18nLanguage+"/","mode":"map","language":i18nLanguage,"callback":function(){var e=$(".i18n");console.log(".i18n 写入中..."),e.each(function(){$(this).html($.i18n.prop($(this).attr("data-name")))}),console.log("写入完毕"),console.log(".i18n-input 写入中..."),$(".i18n-input").each(function(){var e=$(this).attr("selectattr");e||(e="value"),$(this).attr(e,$.i18n.prop($(this).attr("selectname")))}),console.log("写入完毕")}})};$(function(){execI18n(),$("#language option[value="+i18nLanguage+"]").attr("selected",!0),$("#language").bind("change",function(){var e=$(this).children("option:selected").val();console.log(e),getCookie("userLanguage",e,{"expires":30,"path":"/"}),location.reload()})});