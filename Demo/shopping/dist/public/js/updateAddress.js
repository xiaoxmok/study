$(function(){login()||(location.href="login.html");var l=getCookie("token"),c=GetRequest(),e=api.getAddressId(c.id);$("#name").val(e.reciever_name),$("#address").val(e.address),$("#phone").val(e.reciever_phone),$("#country_code").val(e.country_code),"y"===e.is_default?$("#defalut").prop("checked",!0):$("#defalut").prop("checked",!1),"y"===e.is_from_school?$("#is_from_school").prop("checked",!0):$("#is_from_school").prop("checked",!1),$(".submit").click(function(){var e,r,o,i,t=1;if((e=$("#name").val()).length<=0)isEnglish()?$(".error").html("Recipient information required"):$(".error").html("收件人不为能空");else if((o=$("#address").val()).length<=0)isEnglish()?$(".error").html("Address required"):$(".error").html("地址不为能空");else if(r=$("#phone").val(),CheckMobile(r))if(i=$("#country_code").val(),CheckNum(i)){t=$("#defalut").is(":checked")?"y":"n";var s={"token":l,"id":c.id,"reciever_name":e,"country_code":i,"reciever_phone":r,"address":o,"is_default":t};$.ajax({"type":"POST","url":url+"/api/v1/address/update","dataType":"json","data":s,"success":function(e){200===e.code&&(isEnglish()?$(".error").html("Submitted successfully"):$(".error").html("提交成功"),setTimeout(function(){location.href="addressManagement.html"},1e3))},"error":function(e,r,o){}})}else isEnglish()?$(".error").html("Area code is incorrectly formatted"):$(".error").html("区号格式不正确");else isEnglish()?$(".error").html("Phone number format is incorrect"):$(".error").html("手机号格式不正确")})});